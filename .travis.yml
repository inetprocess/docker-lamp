sudo: required
dist: trusty

language: python
python:
  - "3.4"
  - "3.5"
  - "3.6"

install:
  - pip install .
  - stakkr-init
  - pip install -r requirements-dev.txt

env:
  global:
  - secure: "ls+OEePMKmEtCP9N5D7aBhnbAVCemWgDNRq5vFBz0BmsknQ6JATZuer9k//cUd8H7kL7WrWTOzu7EfbAfmrhuKi+0Pc1PUZoV3thNrm3WFipEJDpNiUyU0/w+cBPE52UtmH2BAIYUB4h15IQUyUzL8ioN6IjpTmcgAooCh8Wtz14WPdPPonodt2QPasJvTgcFDesALReU/IsRIxIVe7tEuRIZPCkV5I7r7TTDkIylrmwgXlmA7ca9+X4LwU/ZfLYHXqLWqbDnYjZgN8vIcF5dNFFnUaUJw5HYP2wnMCgbi4HH0s8QYpKpU5I+CZUfMLjloj5vHJ31J0QoV35TErf77aM9oVryPbLCpjDOIlq1ecbLXTKTbtMVpHKWt10goYpEd7Jk/LYzbiJmwELGwCqrhYQGTSqcszHvdLcSdYDPfw6Cvn46iOLFFUZrP0IQEYP2fYHZANm0PUc4hq3hg1qmH8t+ikA9yRtLPBNZn3B1BhNW4zp2v7XRBn0tYzb+ULsRdgbY9xExfYG5qmsKvdiVJ2pRbFtAi8W1z0uNJyFVGdj680jUjJzzzvOda3ykPLlg9D/hZyDRpUKsWNI/PJuIsCLjR/eE5IPcklEa6rry7Li7jfIHo09sYm7n0q+2J893fi2i6R8vzTtikTUET+YvlB4qJ1uUczZEDb+UxGhb3Y="

notifications:
  slack:
  - secure: "VQfnV2SKRv9PFK3GPPhTZZq+etFS0mGTtbBWILoK3r35W0HLFiEAl54zZkZkojOZgaFad97y8mXrIMxl3X37EHxbA/yYaAkApXfRU6DPaOj+VNJP5IOpU8SVJxzNTvTQ2ORzYUNwXxoxuywOVwKpJP1v/HrFStvEvotAPhnA0oM+qCkqB7NRlpZBbWnpDdGqPnG1p6AHjfNjXjyHfAGHE069k4XWCRNxXPKaosJluE1ExIioIbUd+q9ZujUzCRUEJbsKmchVJMWfqHnoKKKxIr0vkL1kWGT+4L5o0YHaJRM1Ei9Bu1FKtVKK+389hWGh+ONOjlHj/U1CzKlKI49Exin2JybioauWgwodn6OO4kYjm1A0obiYGyyQceleCXpSNmq6xLPDP1d3edMki4VKWMEnYYWoFW3gyEbuf8+yf1CHMxx1YzGdhy6pCEJmzzRjWYBLEF0Tg9LfJWbCh8giQPjvnFSwCzM+Gxi1XHk1NNEO0l1yTC/LNL8uZfBG9dmFCd4JvDXGxr2RHfxjP62DKERsBP5iviV8fOQvd7krprVGNKv8SDi0UxIAtZxyrJ2yvpVkrFsWs0EB3waW0dvGWkzP70J8iGOtUEHex/HhAq0x7Xu35StGnY3RO7hLXQaG6f2xXakgYpdet6wN0vvUpEEaE6IrSPUWyjf5oK49Zp4="

before_script:
  - echo $TRAVIS_SECURE_ENV_VARS
  - echo $CC_TEST_REPORTER_ID
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build

# command to run tests
script: py.test

after_script:
  - coverage xml
  - if [[ "$TRAVIS_PYTHON_VERSION" == "3.6" ]]; then ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT; fi
